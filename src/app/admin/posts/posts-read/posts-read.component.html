<h2 class="text-center">Alle Opslag</h2>

<div class="table-responsive" *ngIf="posts$ | async as posts else loading">
  <table class="table table-striped table-sm" *ngIf="posts && posts.length > 0 else noPosts">
    <thead>
    <tr>
      <th scope="col" [appSort]="posts" data-order="desc" data-name="id" style="cursor:pointer;" >ID <i class="float-end bi bi-arrow-down-up"></i></th>
      <th scope="col" [appSort]="posts" data-order="desc" data-name="title" style="cursor:pointer;">Overskrift <i class="float-end bi bi-arrow-down-up"></i></th>
      <th scope="col">Kategori</th>
      <th scope="col" [appSort]="posts" data-order="desc" data-name="paid" style="cursor:pointer;">Betalingsopslag <i class="float-end bi bi-arrow-down-up"></i></th>
      <th scope="col" [appSort]="posts" data-order="desc" data-name="prettyDescriptor" style="cursor:pointer;">URL <i class="float-end bi bi-arrow-down-up"></i></th>
      <th scope="col">Forfatter</th>
      <th scope="col" [appSort]="posts" data-order="desc" data-name="date" data-type="date"  style="cursor:pointer;">Dato <i class="float-end bi bi-arrow-down-up"></i></th>
      <th scope="col">Valgmuligheder</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let post of posts">
      <td>{{post.id}}</td>
      <td>{{post.title}}</td>
      <td>{{post.category.title}}</td>
      <td *ngIf="post.paid === true">Ja</td>
      <td *ngIf="post.paid === false">Nej</td>
      <td>{{post.prettyDescriptor}}</td>
      <td>{{post.author.firstname}} {{post.author.lastname}}</td>
      <td>{{post.date.toString().replace("T"," ").slice(0,-8)}}</td>
      <td><a routerLink="/post/edit/{{post.id}}">Redigér</a> | <a routerLink="/post/delete/{{post.id}}">Slet</a></td>
    </tr>
    </tbody>
  </table>
  <ng-template #noPosts>
    <h6 class="text-center">Ingen opslag fundet!</h6>
  </ng-template>
</div>

<ng-template #loading>
  <p>Indlæser...</p>
</ng-template>
